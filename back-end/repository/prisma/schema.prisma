generator client {
    provider    = "prisma-client-js"
}

datasource db {
    provider    = "postgresql"
    url         = env("DATABASE_URL")
}

model User {
    id          Int     @id @default(autoincrement())
    username    String  @unique
    password    String
    races       Race[]
    submissions Submission_form[]
}

model Admin {
    id          Int     @id @default(autoincrement())
    username    String  @unique
    password    String
    races       Race[]

}

model Crash {
    id          Int     @id @default(autoincrement())
    type        String

    Driver Driver[] @relation(map: "Driver_crash_fkey")
}

model Driver {
    id          Int     @id @default(autoincrement())
    name        String
    team        String
    descritpion String
    racecar     Racecar @relation(fields: [racecarId], references: [id], map: "Driver_racecar_fkey")
    racecarId   Int
    crash       Crash @relation(fields: [crashId], references: [id], map: "Driver_crash_fkey")
    crashId     Int
    race        Race @relation(fields: [raceId], references: [id])
    raceId      Int
}

model Racecar {
    id          Int     @id @default(autoincrement())
    car_name    String
    drivers     Driver[]
}

model Submission_form {
    id          Int     @id @default(autoincrement())
    title       String
    content     String
    user        User @relation(fields: [UserId], references: [id], map: "User_fkey")
    UserId      Int
    races        Race[]
}

model Race {
    id          Int     @id @default(autoincrement())
    name        String
    type        String
    description String
    location    String
    drivers      Driver[]
    users        User[]
    admin       Admin[]
    submission_forms Submission_form[]
}
